<?php
require_once "../../config/settings.inc.php";
require_once "../../include/myview.php";
$t = new MyView();
$t->title = "Reanalysis Data";
$t->iem_resource = "IEMRE";

$s4link = sprintf("/archive/data/%s/stage4/", date("Y/m/d"));

$t->content = <<<EOM
<div class="container-fluid">
<h3 class="mb-4">IEM Reanalysis (IEMRE)</h3>

<div class="row mb-4">
    <div class="col-md-2 text-center">
        <img src="iemre_anim.gif" class="img-fluid rounded shadow-sm" alt="IEMRE Animation" />
    </div>
    <div class="col-md-10">

<p>IEM Reanalysis (IEMRE) is an effort to provide near real-time gridded
analyses of a number of variables useful to drive downstream modeling projects,
like the <a href="https://dailyerosion.org">Daily Erosion Project</a>.  The
IEM presently does not have the compute, nor storage capacity to run this effort
globally at high resolution, so a number of regional domains are curated.</p>

<div class="alert alert-info">
    <h5 class="alert-heading"><i class="bi bi-info-circle me-2" aria-hidden="true"></i>Use better products!</h5>
    IEMRE is nothing special. It was cool maybe 15 years ago,
    but now days there are superior products available.  Use those instead!
</div>

<div class="row">
    <div class="col-lg-6 mb-3">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">Why do this?</h5>
                <p class="card-text">Previously, the IEM has only provided raw observations with limited
                quality control checks in place.  Quality control is hard!  Many times, users
                are simply looking for something "close" and perhaps not as perfect as high
                quality sensor observations can be.  Producing a gridded analysis is one
                way to produce a dataset from point observations which can be sampled as
                a means of spatial interpolation.</p>
            </div>
        </div>
    </div>
    
    <div class="col-lg-6 mb-3">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">Isn't this a duplication of effort?</h5>
                <p class="card-text">While there are other "reanalysis" type projects out there with
                data freely available, many times their data does not update in near real-time
                and does not include many of the datasets the IEM uniquely collects.</p>
                <p class="card-text"><strong>Alternatives:</strong></p>
                <ul class="list-unstyled">
                    <li><a href="https://www.ecmwf.int/en/era5-land" class="btn btn-sm btn-outline-primary me-2 mb-2">ERA5Land</a></li>
                    <li><a href="https://daymet.ornl.gov/" class="btn btn-sm btn-outline-primary me-2 mb-2">DayMet</a></li>
                    <li><a href="http://www.climatologylab.org/gridmet.html" class="btn btn-sm btn-outline-primary me-2 mb-2">GridMet</a></li>
                    <li><a href="https://prism.oregonstate.edu/" class="btn btn-sm btn-outline-primary me-2 mb-2">PRISM</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

    </div>
</div>

<h3 class="mt-5 mb-4">Product Changes</h3>

<div class="alert alert-warning">
    <ul class="mb-0">
        <li><strong>26 Jul 2025:</strong> Non-CONUS domains are now available
        for South America, Europe, and Southeast Asia/China.</li>
        <li><strong>4 Jan 2023:</strong> Near realtime solar radiation is sourced from
        the HRRR model.  For dates prior to 8 days ago, it is sourced from ERA5Land.
        This is a change as it used to be sourced from MERRAv2.</li>
        <li><strong>1 May 2018:</strong> Grid domain expanded to cover CONUS.  It will
        take a while to fully populate the grids.  At the moment, just the previous
        midwestern US data is available.  Grid resolution increased to 0.125x0.125
        degree.</li>
    </ul>
</div>

<h3 class="mt-5 mb-4">Data Flow</h3>
 
<div class="row g-4">
    <div class="col-lg-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">1. Input Datasets</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0">
                        <strong>NCEP Stage IV Precipitation</strong>
                        <br />This is an hourly gridded product with precipitation estimates
                        derived by RADAR and then bias corrected by gauge data. The IEM
                        caches the <a href="{$s4link}">grib data</a> and makes hourly
                        plots available <a href="/timemachine/?product=40">here</a>.
                    </li>
                    
                    <li class="list-group-item px-0">
                        <strong>MRMS Precipitation</strong>
                        <br />Currently, this is only used to populate a daily total in a
                        dedicated netcdf file.
                    </li>

                    <li class="list-group-item px-0">ASOS/AWOS Daily Summaries</li>
                    <li class="list-group-item px-0">NWS Daily Climate Summaries</li>
                    <li class="list-group-item px-0">HRRR/MERRA/NARR Daily Solar Radiation</li>
                    <li class="list-group-item px-0">NWS COOPerative Observations</li>
                    <li class="list-group-item px-0">Manually QC'd Iowa COOP data from Iowa's State Climatologist</li>
                    <li class="list-group-item px-0">NCDC QC'd COOP Data</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">2. IEM ReAnalysis Gridded Datasets</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0">
                        <a href="/plotting/auto/?q=86">Daily Maps of Gridded Variables</a>
                        <br />View a smoothed or gridded plot of IEMRE data
                    </li>
                    <li class="list-group-item px-0">
                        <a href="/plotting/auto/?q=84">Maps of Precipitation</a>
                        <br />Generate maps for a single day or multiple days.
                    </li>
                    <li class="list-group-item px-0">
                        Download the raw NetCDF Files <a href="/onsite/iemre/">here</a>.
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card h-100">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0">3. Climodat Station Data</h4>
            </div>
            <div class="card-body">
                <p>The location of the IEM Longterm tracked climate stations are used to
                sample from the IEMRE grid to produce daily values of high / low
                temperature, precipitation, snowfall, snow depth, and radiation.  For
                some stations, a direct copy of the corresponding ASOS station data
                is used.</p>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item px-0">
                        <a href="/climodat/">Climodat Reports</a>
                        <br />These are pre-generated reports answering many of the commonly
                        asked climatology questions.
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-5 mb-4">Hourly Data Sources</h3>

<p>Yearly <a href="/onsite/iemre/">netcdf files</a> since 1950, with updates
at about 10 after the hour.  Since we want real-time data, some of these
model sources are not available immediately, so the denoted intermediate source
fills the gap until the final source is available.</p>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th scope="col">Variable</th>
                <th scope="col">Intermediate Source</th>
                <th scope="col">Final Source</th>
            </tr>
        </thead>
        <tbody>

        <tr>
            <th scope="row">Precipitation</th>
            <td>Stage IV (CONUS)
            <br />DWD ICON Short Term Forecast (non-CONUS)</td>
            <td>1997+ Stage IV adjusted by PRISM (CONUS)
            <br />1950-1997 ERA5-Land (CONUS)
            <br />ERA5-Land (non-CONUS)</td>
        </tr>

        <tr>
            <th scope="row">
                2m Air Temperature<br />
                2 m Dew Point Temperature<br />
                10m Wind Speed
            </th>
            <td>Crude ASOS grid analysis</td>
            <td>2010+: RTMA, once available (CONUS)
            <br />1950-2010 ERA5-Land</td>
        </tr>

        <tr>
            <th scope="row">4 inch (cough 0-10 or 0-7cm) Soil Temperature</th>
            <td>HRRR</td>
            <td>1950+: ERA5-Land</td>
        </tr>

        <tr>
            <th scope="row">Sky Coverage</th>
            <td>Crude ASOS grid analysis</td>
            <td>Crude ASOS grid analysis</td>
        </tr>

        </tbody>
    </table>
</div>

<h3 class="mt-5 mb-4">Daily Data Sources</h3>

<p>Since IEMRE intends to support real-time modeling needs, the goal is to have
at least a first guess analysis of all fields by approximately midnight. These
fields are refined as better and more detailed data is processed.</p>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th scope="col">Variable</th>
                <th scope="col">Intermediate Source</th>
                <th scope="col">Final Source</th>
            </tr>
        </thead>
        <tbody>

        <tr>
            <th scope="row">High/Low 4 inch (cough 0-10 or 0-7cm) Soil Temperature</th>
            <td>HRRR</td>
            <td>1950+: ERA5-Land</td>
        </tr>

        <tr>
            <th scope="row">Average 2m Dew Point Temperature</th>
            <td>Simple average of hourly RTMA</td>
            <td>2010+: RTMA, once available<br />1950-2010 ERA5-Land</td>
        </tr>

        <tr>
            <td scope="row">24 Hour Snowfall at 12 UTC</td>
            <td scope="row">
            <a href="https://www.nohrsc.noaa.gov/snowfall/">NOHRSC Snowfall</a></td>
            <td scope="row">2008+: NOHRSC
            <br />Prior: COOP snowfall analysis.</td>
        </tr>

        </tbody>
    </table>
</div>

<h3 class="mt-5 mb-4">Data Access</h3>

<p>Here are some JSON web services you may try.</p>

<div class="row g-3">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">MultiDay Request</h5>
            </div>
            <div class="card-body">
                <p class="card-text"><strong>Form:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/multiday/{YYYY-MM-DD::date1}/{YYYY-MM-DD::date2}/{LAT}/{LON}/json</code>
                <p class="card-text mt-2"><strong>Example:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/multiday/2010-05-01/2010-09-30/42.54/-96.40/json</code>
            </div>
        </div>
    </div>
</div>
<div class="row g-3">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Single Day Request</h5>
            </div>
            <div class="card-body">
                <p class="card-text"><strong>Form:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/daily/{YYYY-MM-DD}/{LAT}/{LON}/json</code>
                <p class="card-text mt-2"><strong>Example:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/daily/2010-05-01/42.54/-96.40/json</code>
            </div>
        </div>
    </div>
</div>
<div class="row g-3">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Hourly Request</h5>
            </div>
            <div class="card-body">
                <p class="card-text"><strong>Form:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/hourly/{YYYY-MM-DD}/{LAT}/{LON}/json</code>
                <p class="card-text mt-2"><strong>Example:</strong></p>
                <code class="d-block bg-light p-2 rounded">{$EXTERNAL_BASEURL}/iemre/hourly/2010-05-01/42.54/-96.40/json</code>
                <small class="text-muted">Single Day's Hourly (CDT/CST) Request</small>
            </div>
        </div>
    </div>
</div>

<h4 class="mt-5 mb-3">Raw Data Access</h4>

<p>The IEM makes extensive use of the <a href="https://www.unidata.ucar.edu/software/netcdf/">NetCDF</a>
file format to store these gridded datasets.  You can find individual web directories for various
IEMRE related datasets:</p>

<div class="row g-3">
    <div class="col-md-6 col-lg-4">
        <div class="list-group">
            <a href="/onsite/iemre/" class="list-group-item list-group-item-action">
                <i class="fas me-2"></i>IEMRE CONUS Files
                    <i class="bi bi-hdd-network me-2" aria-hidden="true"></i>IEMRE CONUS Files
            </a>
            <a href="/onsite/iemre_china/" class="list-group-item list-group-item-action">
                <i class="fas me-2"></i>IEMRE China Files
                    <i class="bi bi-hdd-network me-2" aria-hidden="true"></i>IEMRE China Files
            </a>
            <a href="/onsite/iemre_europe/" class="list-group-item list-group-item-action">
                <i class="fas me-2"></i>IEMRE Europe Files
                    <i class="bi bi-hdd-network me-2" aria-hidden="true"></i>IEMRE Europe Files
            </a>
            <a href="/onsite/iemre_sa/" class="list-group-item list-group-item-action">
                <i class="fas me-2"></i>IEMRE South America Files
                    <i class="bi bi-hdd-network me-2" aria-hidden="true"></i>IEMRE South America Files
            </a>
            <a href="/onsite/era5land/" class="list-group-item list-group-item-action">
                <i class="bi bi-cloud me-2" aria-hidden="true"></i>ERA5Land Hourly Netcdf Files
            </a>
            <a href="/onsite/mrms/" class="list-group-item list-group-item-action">
                <i class="bi bi-broadcast-pin me-2" aria-hidden="true"></i>MRMS CST Daily Netcdf Files
            </a>
        </div>
    </div>
    <div class="col-md-6 col-lg-4">
        <div class="list-group">
            <a href="/onsite/stage4/" class="list-group-item list-group-item-action">
                <i class="bi bi-graph-up-arrow me-2" aria-hidden="true"></i>NCEP Stage IV Hourly Data
            </a>
            <a href="/onsite/prism/" class="list-group-item list-group-item-action">
                <i class="bi bi-signpost me-2" aria-hidden="true"></i>Oregon State PRISM Daily Data
            </a>
        </div>
    </div>
</div>

</div>
EOM;
$t->render('single.phtml');
