Ext.namespace("iemdata");iemdata.nws_products=[["AFD","Area Forecast Discussion"],["HWO","Hazzardous Weather Outlook"],["NOW","Nowcast"]];
iemdata.vtec_phenomena_dict=[["SV","Severe Thunderstorm"],["TO","Tornado"],["MA","Marine"],["AF","Volcanic Ashfall"],["AS","Air Stagnation"],["AV","Avalanche"],["BH","Beach Hazard"],["BS","Blowing Snow"],["BZ","Blizzard"],["CF","Coastal Flood"],["DU","Blowing Dust"],["DS","Dust Storm"],["EC","Extreme Cold"],["EH","Excessive Heat"],["EW","Extreme Wind"],["FA","Areal Flood"],["FF","Flash Flood"],["FL","Flood"],["FR","Frost"],["FZ","Freeze"],["FG","Dense Fog"],["FW","Red Flag"],["GL","Gale"],["HF","Hurricane Force Wind"],
["HI","Inland Hurricane Wind"],["HS","Heavy Snow"],["HP","Heavy Sleet"],["HT","Heat"],["HU","Hurricane"],["HW","High Wind"],["HY","Hydrologic"],["HZ","Hard Freeze"],["IS","Ice Storm"],["IP","Sleet"],["LB","Lake Effect Snow and Blowing Snow"],["LE","Lake Effect Snow"],["LO","Low Water"],["LS","Lakeshore Flood"],["LW","Lake Wind"],["RB","Small Craft for Rough Bar"],["RH","Radiological Hazard"],["SB","Snow and Blowing Snow"],["SC","Small Craft"],["SE","Hazardous Seas"],["SI","Small Craft for Winds"],
["SM","Dense Smoke"],["SN","Snow"],["SR","Storm"],["SU","High Surf"],["TI","Inland Tropical Storm Wind"],["TR","Tropical Storm"],["TS","Tsunami"],["TY","Typhoon"],["UP","Ice Accretion"],["VO","Volcano"],["WC","Wind Chill"],["WI","Wind"],["WS","Winter Storm"],["WW","Winter Weather"],["ZF","Freezing Fog"],["ZR","Freezing Rain"]];iemdata.vtec_sig_dict=[["W","Warning"],["Y","Advisory"],["A","Watch"],["S","Statement"],["F","Forecast"],["O","Outlook"],["N","Synopsis"]];
iemdata.wfos=[["ABQ","ALBUQUERQUE"],["ABR","ABERDEEN"],["AFC","ANCHORAGE"],["AFG","FAIRBANKS"],["AJK","JUNEAU"],["AKQ","WAKEFIELD"],["ALY","ALBANY"],["AMA","AMARILLO"],["APX","GAYLORD"],["ARX","LA_CROSSE"],["BGM","BINGHAMTON"],["BIS","BISMARCK"],["BMX","BIRMINGHAM"],["BOI","BOISE"],["BOU","DENVER"],["BOX","TAUNTON"],["BRO","BROWNSVILLE"],["BTV","BURLINGTON"],["BUF","BUFFALO"],["BYZ","BILLINGS"],["CAE","COLUMBIA"],["CAR","CARIBOU"],["CHS","CHARLESTON, SC"],["CLE","CLEVELAND"],["CRP","CORPUS_CHRISTI"],
["CTP","STATE_COLLEGE"],["CYS","CHEYENNE"],["DDC","DODGE_CITY"],["DLH","DULUTH"],["DMX","DES_MOINES"],["DTX","DETROIT"],["DVN","QUAD_CITIES_IA"],["EAX","KANSAS_CITY/PLEASANT_HILL"],["EKA","EUREKA"],["EPZ","EL_PASO_TX/SANTA_TERESA"],["EWX","AUSTIN/SAN_ANTONIO"],["EYW","KEY_WEST"],["FFC","PEACHTREE_CITY"],["FGF","EASTERN_NORTH_DAKOTA"],["FGZ","FLAGSTAFF"],["FSD","SIOUX_FALLS"],["FWD","DALLAS/FORT_WORTH"],["GGW","GLASGOW"],["GID","HASTINGS"],["GJT","GRAND_JUNCTION"],["GLD","GOODLAND"],["GRB","GREEN_BAY"],
["GRR","GRAND_RAPIDS"],["GSP","GREENVILLE/SPARTANBURG"],["GYX","GRAY"],["HFO","HONOLULU"],["HGX","HOUSTON/GALVESTON"],["HNX","SAN_JOAQUIN_VALLEY/HANFORD"],["HUN","HUNTSVILLE"],["ICT","WICHITA"],["ILM","WILMINGTON, NC"],["ILN","WILMINGTON, OH"],["ILX","LINCOLN"],["IND","INDIANAPOLIS"],["IWX","NORTHERN_INDIANA"],["JAN","JACKSON, MS"],["JAX","JACKSONVILLE"],["JKL","JACKSON, KY"],["LBF","NORTH_PLATTE"],["LCH","LAKE_CHARLES"],["LIX","NEW_ORLEANS"],["LKN","ELKO"],["LMK","LOUISVILLE"],["LOT","CHICAGO"],
["LOX","LOS_ANGELES/OXNARD"],["LSX","ST_LOUIS"],["LUB","LUBBOCK"],["LWX","BALTIMORE_MD/_WASHINGTON_DC"],["LZK","LITTLE_ROCK"],["MAF","MIDLAND/ODESSA"],["MEG","MEMPHIS"],["MFL","MIAMI"],["MFR","MEDFORD"],["MHX","NEWPORT/MOREHEAD_CITY"],["MKX","MILWAUKEE/SULLIVAN"],["MLB","MELBOURNE"],["MOB","MOBILE"],["MPX","TWIN_CITIES/CHANHASSEN"],["MQT","MARQUETTE"],["MRX","MORRISTOWN"],["MSO","MISSOULA"],["MTR","SAN_FRANCISCO"],["OAX","OMAHA/VALLEY"],["OHX","NASHVILLE"],["OKX","NEW_YORK"],["OTX","SPOKANE"],["OUN",
"NORMAN"],["PAH","PADUCAH"],["PBZ","PITTSBURGH"],["PDT","PENDLETON"],["PHI","MOUNT_HOLLY"],["PIH","POCATELLO/IDAHO_FALLS"],["PQR","PORTLAND"],["PSR","PHOENIX"],["PUB","PUEBLO"],["RAH","RALEIGH"],["REV","RENO"],["RIW","RIVERTON"],["RLX","CHARLESTON, WV"],["RNK","BLACKSBURG"],["SEW","SEATTLE"],["SGF","SPRINGFIELD"],["SGX","SAN_DIEGO"],["SHV","SHREVEPORT"],["SJT","SAN_ANGELO"],["SJU","SAN_JUAN"],["SLC","SALT_LAKE_CITY"],["STO","SACRAMENTO"],["TAE","TALLAHASSEE"],["TBW","TAMPA_BAY_AREA/RUSKIN"],["TFX",
"GREAT_FALLS"],["TOP","TOPEKA"],["TSA","TULSA"],["TWC","TUCSON"],["UNR","RAPID_CITY"],["VEF","LAS_VEGAS"]];Ext.grid.RowExpander=function(a){Ext.apply(this,a);this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0});Ext.grid.RowExpander.superclass.constructor.call(this);this.tpl&&("string"==typeof this.tpl&&(this.tpl=new Ext.Template(this.tpl)),this.tpl.compile());this.state={};this.bodyContent={}};
Ext.extend(Ext.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:!1,fixed:!0,dataIndex:"",id:"expander",lazyRender:!0,enableCaching:!0,getRowClass:function(a,b,c,d){c.cols-=1;(d=this.bodyContent[a.id])||this.lazyRender||(d=this.getBodyContent(a,b));d&&(c.body=d);return this.state[a.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(a){this.grid=a;var b=a.getView();b.getRowClass=this.getRowClass.createDelegate(this);b.enableRowBody=!0;a.on("render",function(){b.mainBody.on("mousedown",
this.onMouseDown,this)},this)},getBodyContent:function(a,b){if(!this.enableCaching)return this.tpl.apply(a.data);var c=this.bodyContent[a.id];c||(c=this.tpl.apply(a.data),this.bodyContent[a.id]=c);return c},onMouseDown:function(a,b){if("x-grid3-row-expander"==b.className){a.stopEvent();var c=a.getTarget(".x-grid3-row");this.toggleRow(c)}},renderer:function(a,b,c){b.cellAttr='rowspan="2"';return'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(a,b,c){return!1!==this.fireEvent("beforeexpand",
this,a,b,c)?(this.tpl&&this.lazyRender&&(b.innerHTML=this.getBodyContent(a,c)),!0):!1},toggleRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));this[Ext.fly(a).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](a)},expandRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));var b=this.grid.store.getAt(a.rowIndex),c=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",a);this.beforeExpand(b,c,a.rowIndex)&&(this.state[b.id]=!0,Ext.fly(a).replaceClass("x-grid3-row-collapsed",
"x-grid3-row-expanded"),this.fireEvent("expand",this,b,c,a.rowIndex))},collapseRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));var b=this.grid.store.getAt(a.rowIndex),c=Ext.fly(a).child("tr:nth(1) div.x-grid3-row-body",!0);!1!==this.fireEvent("beforcollapse",this,b,c,a.rowIndex)&&(this.state[b.id]=!1,Ext.fly(a).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed"),this.fireEvent("collapse",this,b,c,a.rowIndex))}});Ext.ux.Printer=function(){return{renderers:{},registerRenderer:function(a,b){this.renderers[a]=new b},getRenderer:function(a){return this.renderers[a]},print:function(a){for(var b=a.getXTypes().split("/"),c=b.length-1;0<=c;c--){var d=this.getRenderer(b[c]);if(void 0!=d){d.print(a);break}}}}}();
Ext.override(Ext.Component,{getXTypes:function(){var a=this.constructor;if(!a.xtypes){for(var b=[],c=this;c;){var d=c.constructor.xtype;void 0!=d&&b.unshift(d);c=c.constructor.superclass}a.xtypeChain=b;a.xtypes=b.join("/")}return a.xtypes}});
Ext.ux.Printer.BaseRenderer=Ext.extend(Object,{print:function(a){var b=a&&a.getXType?String.format("print_{0}_{1}",a.getXType(),a.id):"print",b=window.open("",b);b.document.write(this.generateHTML(a));b.document.close();b.close();b.print()},generateHTML:function(a){return(new Ext.XTemplate('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',"<html>","<head>",'<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />',
'<link href="'+this.stylesheetPath+'" rel="stylesheet" type="text/css" media="screen,print" />',"<title>"+this.getTitle(a)+"</title>","</head>","<body>",this.generateBody(a),"</body>","</html>")).apply(this.prepareData(a))},generateBody:Ext.emptyFn,prepareData:function(a){return a},getTitle:function(a){return"function"==typeof a.getTitle?a.getTitle():a.title||"Printing"},stylesheetPath:"stylesheets/print.css"});
Ext.ux.Printer.ColumnTreeRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(a){var b=this.getColumns(a);a=this.headerTpl.apply(b);b=this.bodyTpl.apply(b);return String.format('<table>{0}<tpl for=".">{1}</tpl></table>',a,b)},getColumns:function(a){return a.columns},prepareData:function(a){var b=a.root,c=[],d=this.getColumns(a),f=this.indentPadding;b.cascade(function(b){if(!0!==b.hidden&&!0!==b.isHiddenRoot()){var e=Ext.apply({depth:b.getDepth()*f},b.attributes);Ext.iterate(e,function(a,
b){Ext.each(d,function(c){c.dataIndex==a&&(e[a]=c.renderer?c.renderer(b):b)},this)});e[this.getColumns(a)[0].dataIndex]=b.attributes.text;c.push(e)}},this);return c},indentPadding:15,headerTpl:new Ext.XTemplate("<tr>",'<tpl for=".">','<th width="{width}">{header}</th>',"</tpl>","</tr>"),bodyTpl:new Ext.XTemplate("<tr>",'<tpl for=".">','<td style="padding-left: {[xindex == 1 ? "\\{depth\\}" : "0"]}px">{{dataIndex}}</td>',"</tpl>","</tr>")});Ext.ux.Printer.registerRenderer("columntree",Ext.ux.Printer.ColumnTreeRenderer);
Ext.ux.Printer.GridPanelRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(a){var b=this.getColumns(a);a=this.headerTpl.apply(b);b=this.bodyTpl.apply(b);return String.format('<table>{0}<tpl for=".">{1}</tpl></table>',a,b)},prepareData:function(a){var b=this.getColumns(a),c=[];a.store.data.each(function(a){var f={};Ext.iterate(a.data,function(c,e){Ext.each(b,function(b){if(b.dataIndex==c)return f[c]=b.renderer?b.renderer(e,null,a):e,!1},this)});c.push(f)});return c},getColumns:function(a){var b=
[];Ext.each(a.getColumnModel().config,function(a){!0!=a.hidden&&b.push(a)},this);return b},headerTpl:new Ext.XTemplate("<tr>",'<tpl for=".">',"<th>{header}</th>","</tpl>","</tr>"),bodyTpl:new Ext.XTemplate("<tr>",'<tpl for=".">',"<td>{{dataIndex}}</td>","</tpl>","</tr>")});Ext.ux.Printer.registerRenderer("grid",Ext.ux.Printer.GridPanelRenderer);Ext.namespace("Ext.ux.menu");
Ext.ux.menu.EditableItem=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",hideOnClick:!1,initComponent:function(){this.addEvents({keyup:!0});this.editor=this.editor||new Ext.form.TextField;this.text&&this.editor.setValue(this.text)},onRender:function(a){var b=a.createChild({cls:this.itemCls,html:'<img src="'+this.icon+'" class="x-menu-item-icon" style="margin: 3px 3px 2px 2px;" />'});Ext.apply(this.config,{width:125});this.editor.render(b);this.el=b;this.relayEvents(this.editor.el,["keyup"]);Ext.isGecko&&
b.setStyle("overflow","auto");Ext.ux.menu.EditableItem.superclass.onRender.apply(this,arguments)},getValue:function(){return this.editor.getValue()},setValue:function(a){this.editor.setValue(a)},isValid:function(a){return this.editor.isValid(a)}});Ext.namespace("Ext.ux.grid");Ext.ux.grid.GridFilters=function(a){this.filters=new Ext.util.MixedCollection;this.filters.getKey=function(a){return a?a.dataIndex:null};for(var b=0,c=a.filters.length;b<c;b++)this.addFilter(a.filters[b]);this.deferredUpdate=new Ext.util.DelayedTask(this.reload,this);delete a.filters;Ext.apply(this,a)};
Ext.extend(Ext.ux.grid.GridFilters,Ext.util.Observable,{updateBuffer:500,paramPrefix:"filter",filterCls:"ux-filtered-column",local:!1,autoReload:!0,stateId:void 0,init:function(a){if(a instanceof Ext.grid.GridPanel){this.grid=a;this.store=this.grid.getStore();if(this.local)this.store.on("load",function(a){a.filterBy(this.getRecordFilter())},this);else this.store.on("beforeload",this.onBeforeLoad,this);this.grid.filters=this;this.grid.addEvents({filterupdate:!0});a.on("render",this.onRender,this);
Ext.state.Manager&&this.stateId&&(a=Ext.state.Manager.get(this.stateId))&&this.applyState(a)}else a instanceof Ext.PagingToolbar&&(this.toolbar=a)},getState:function(){var a={};this.filters.each(function(b){b.active&&(a[b.dataIndex]=b.getValue())});return{filters:a}},applyState:function(a){this.suspendStateStore=!0;this.clearFilters();if(a.filters)for(var b in a.filters){var c=this.filters.get(b);c&&(c.setValue(a.filters[b]),c.setActive(!0))}this.deferredUpdate.cancel();this.local&&this.reload();
this.suspendStateStore=!1},onRender:function(){var a=this.grid.getView().hmenu;this.sep=a.addSeparator();this.menu=a.add(new Ext.menu.CheckItem({text:"Filters",menu:new Ext.menu.Menu}));this.menu.on("checkchange",this.onCheckChange,this);this.menu.on("beforecheckchange",this.onBeforeCheck,this);a.on("beforeshow",this.onMenu,this);this.grid.getView().on("refresh",this.onRefresh,this);this.updateColumnHeadings(this.grid.getView())},onMenu:function(a){if(a=this.getMenuFilter())this.menu.menu=a.menu,
this.menu.setChecked(a.active,!1);this.menu.setVisible(void 0!==a);this.sep.setVisible(void 0!==a)},onCheckChange:function(a,b){this.getMenuFilter().setActive(b)},onBeforeCheck:function(a,b){return!b||this.getMenuFilter().isActivatable()},onStateChange:function(a,b){if("serialize"!=a){b==this.getMenuFilter()&&this.menu.setChecked(b.active,!1);(this.autoReload||this.local)&&this.deferredUpdate.delay(this.updateBuffer);var c=this.grid.getView();this.updateColumnHeadings(c);Ext.state.Manager&&this.stateId&&
!0!==this.suspendStateStore&&Ext.state.Manager.set(this.stateId,this.getState());this.grid.fireEvent("filterupdate",this,b)}},onBeforeLoad:function(a,b){b.params=b.params||{};this.cleanParams(b.params);var c=this.buildQuery(this.getFilterData());Ext.apply(b.params,c)},onRefresh:function(a){this.updateColumnHeadings(a)},getMenuFilter:function(){var a=this.grid.getView();return a&&void 0!==a.hdCtxIndex?this.filters.get(a.cm.config[a.hdCtxIndex].dataIndex):null},updateColumnHeadings:function(a){if(a&&
a.mainHd)for(var b=a.mainHd.select("td").removeClass(this.filterCls),c=0,d=a.cm.config.length;c<d;c++){var f=this.getFilter(a.cm.config[c].dataIndex);f&&f.active&&b.item(c).addClass(this.filterCls)}},reload:function(){if(this.local)this.grid.store.clearFilter(!0),this.grid.store.filterBy(this.getRecordFilter());else{this.deferredUpdate.cancel();var a=this.grid.store;if(this.toolbar){var b=this.toolbar.paramNames.start;a.lastOptions&&a.lastOptions.params&&a.lastOptions.params[b]&&(a.lastOptions.params[b]=
0)}a.reload()}},getRecordFilter:function(){var a=[];this.filters.each(function(b){b.active&&a.push(b)});var b=a.length;return function(c){for(var d=0;d<b;d++)if(!a[d].validateRecord(c))return!1;return!0}},addFilter:function(a){a=a.menu?a:new (this.getFilterClass(a.type))(a);this.filters.add(a);Ext.util.Observable.capture(a,this.onStateChange,this);return a},getFilter:function(a){return this.filters.get(a)},clearFilters:function(){this.filters.each(function(a){a.setActive(!1)})},getFilterData:function(){var a=
[];this.filters.each(function(b){if(b.active)for(var c=[].concat(b.serialize()),d=0,f=c.length;d<f;d++)a.push({field:b.dataIndex,data:c[d]})});return a},buildQuery:function(a){for(var b={},c=0,d=a.length;c<d;c++){var f=a[c],g=[this.paramPrefix,"[",c,"]"].join("");b[g+"[field]"]=f.field;var g=g+"[data]",e;for(e in f.data)b[[g,"[",e,"]"].join("")]=f.data[e]}return b},cleanParams:function(a){var b=RegExp("^"+this.paramPrefix+"[[0-9]+]"),c;for(c in a)b.test(c)&&delete a[c]},getFilterClass:function(a){return Ext.ux.grid.filter[a.substr(0,
1).toUpperCase()+a.substr(1)+"Filter"]}});Ext.namespace("Ext.ux.grid.filter");Ext.ux.grid.filter.Filter=function(a){Ext.apply(this,a);this.events={activate:!0,deactivate:!0,update:!0,serialize:!0};Ext.ux.grid.filter.Filter.superclass.constructor.call(this);this.menu=new Ext.menu.Menu;this.init();a&&a.value&&(this.setValue(a.value),this.setActive(!1!==a.active,!0),delete a.value)};
Ext.extend(Ext.ux.grid.filter.Filter,Ext.util.Observable,{active:!1,dataIndex:null,menu:null,init:Ext.emptyFn,fireUpdate:function(){this.value=this.item.getValue();this.active&&this.fireEvent("update",this);this.setActive(0<this.value.length)},isActivatable:function(){return!0},setActive:function(a,b){this.active!=a&&(this.active=a,!0!==b&&this.fireEvent(a?"activate":"deactivate",this))},getValue:Ext.emptyFn,setValue:Ext.emptyFn,serialize:Ext.emptyFn,validateRecord:function(){return!0}});Ext.namespace("Ext.ux.form");Ext.ux.form.Spinner=function(a){Ext.ux.form.Spinner.superclass.constructor.call(this,a);this.addEvents({spin:!0,spinup:!0,spindown:!0})};
Ext.extend(Ext.ux.form.Spinner,Ext.form.TriggerField,{triggerClass:"x-form-spinner-trigger",splitterClass:"x-form-spinner-splitter",alternateKey:Ext.EventObject.shiftKey,strategy:void 0,onRender:function(a,b){Ext.ux.form.Spinner.superclass.onRender.call(this,a,b);this.splitter=this.wrap.createChild({tag:"div",cls:this.splitterClass,style:"width:13px; height:2px;"});this.splitter.show().setRight(Ext.isIE?1:2);this.splitter.show().setTop(10);this.proxy=this.trigger.createProxy("",this.splitter,!0);
this.proxy.addClass("x-form-spinner-proxy");this.proxy.setStyle("left","0px");this.proxy.setSize(14,1);this.proxy.hide();this.dd=new Ext.dd.DDProxy(this.splitter.dom.id,"SpinnerDrag",{dragElId:this.proxy.id});this.initSpinner()},initTrigger:function(){this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},initSpinner:function(){this.keyNav=new Ext.KeyNav(this.el,{up:function(a){a.preventDefault();this.onSpinUp()},down:function(a){a.preventDefault();
this.onSpinDown()},pageUp:function(a){a.preventDefault();this.onSpinUpAlternate()},pageDown:function(a){a.preventDefault();this.onSpinDownAlternate()},scope:this});this.repeater=new Ext.util.ClickRepeater(this.trigger);this.repeater.on("click",this.onTriggerClick,this,{preventDefault:!0});this.trigger.on("mouseover",this.onMouseOver,this,{preventDefault:!0});this.trigger.on("mouseout",this.onMouseOut,this,{preventDefault:!0});this.trigger.on("mousemove",this.onMouseMove,this,{preventDefault:!0});
this.trigger.on("mousedown",this.onMouseDown,this,{preventDefault:!0});this.trigger.on("mouseup",this.onMouseUp,this,{preventDefault:!0});this.wrap.on("mousewheel",this.handleMouseWheel,this);this.dd.setXConstraint(0,0,10);this.dd.setYConstraint(1500,1500,10);this.dd.endDrag=this.endDrag.createDelegate(this);this.dd.startDrag=this.startDrag.createDelegate(this);this.dd.onDrag=this.onDrag.createDelegate(this);if("object"==typeof this.strategy&&this.strategy.xtype){switch(this.strategy.xtype){case "number":this.strategy=
new Ext.ux.form.Spinner.NumberStrategy(this.strategy);break;case "date":this.strategy=new Ext.ux.form.Spinner.DateStrategy(this.strategy);break;case "time":this.strategy=new Ext.ux.form.Spinner.TimeStrategy(this.strategy);break;default:delete this.strategy}delete this.strategy.xtype}void 0==this.strategy&&(this.strategy=new Ext.ux.form.Spinner.NumberStrategy)},onMouseOver:function(){if(!this.disabled){var a=this.getMiddle();this.__tmphcls=Ext.EventObject.getPageY()<a?"x-form-spinner-overup":"x-form-spinner-overdown";
this.trigger.addClass(this.__tmphcls)}},onMouseOut:function(){this.trigger.removeClass(this.__tmphcls)},onMouseMove:function(){if(!this.disabled){var a=this.getMiddle();Ext.EventObject.getPageY()>a&&"x-form-spinner-overup"==this.__tmphcls||Ext.EventObject.getPageY()}},onMouseDown:function(){if(!this.disabled){var a=this.getMiddle();this.__tmpccls=Ext.EventObject.getPageY()<a?"x-form-spinner-clickup":"x-form-spinner-clickdown";this.trigger.addClass(this.__tmpccls)}},onMouseUp:function(){this.trigger.removeClass(this.__tmpccls)},
onTriggerClick:function(){if(!this.disabled&&!this.getEl().dom.readOnly){var a=this.getMiddle();this["onSpin"+(Ext.EventObject.getPageY()<a?"Up":"Down")]()}},getMiddle:function(){var a=this.trigger.getTop(),b=this.trigger.getHeight();return a+b/2},isSpinnable:function(){return this.disabled||this.getEl().dom.readOnly?(Ext.EventObject.preventDefault(),!1):!0},handleMouseWheel:function(a){if(!1!=this.wrap.hasClass("x-trigger-wrap-focus")){var b=a.getWheelDelta();0<b?(this.onSpinUp(),a.stopEvent()):
0>b&&(this.onSpinDown(),a.stopEvent())}},startDrag:function(){this.proxy.show();this._previousY=Ext.fly(this.dd.getDragEl()).getTop()},endDrag:function(){this.proxy.hide()},onDrag:function(){if(!this.disabled){var a=Ext.fly(this.dd.getDragEl()).getTop(),b="";this._previousY>a&&(b="Up");this._previousY<a&&(b="Down");if(""!=b)this["onSpin"+b]();this._previousY=a}},onSpinUp:function(){if(!1!=this.isSpinnable())if(!0==Ext.EventObject.shiftKey)this.onSpinUpAlternate();else this.strategy.onSpinUp(this),
this.fireEvent("spin",this),this.fireEvent("spinup",this)},onSpinDown:function(){if(!1!=this.isSpinnable())if(!0==Ext.EventObject.shiftKey)this.onSpinDownAlternate();else this.strategy.onSpinDown(this),this.fireEvent("spin",this),this.fireEvent("spindown",this)},onSpinUpAlternate:function(){!1!=this.isSpinnable()&&(this.strategy.onSpinUpAlternate(this),this.fireEvent("spin",this),this.fireEvent("spinup",this))},onSpinDownAlternate:function(){!1!=this.isSpinnable()&&(this.strategy.onSpinDownAlternate(this),
this.fireEvent("spin",this),this.fireEvent("spindown",this))}});Ext.reg("uxspinner",Ext.ux.form.Spinner);Ext.ux.form.Spinner.Strategy=function(a){Ext.apply(this,a)};
Ext.extend(Ext.ux.form.Spinner.Strategy,Ext.util.Observable,{defaultValue:0,minValue:void 0,maxValue:void 0,incrementValue:1,alternateIncrementValue:5,validationTask:new Ext.util.DelayedTask,onSpinUp:function(a){this.spin(a,!1,!1)},onSpinDown:function(a){this.spin(a,!0,!1)},onSpinUpAlternate:function(a){this.spin(a,!1,!0)},onSpinDownAlternate:function(a){this.spin(a,!0,!0)},spin:function(a,b,c){this.validationTask.delay(500,function(){a.validate()})},fixBoundries:function(a){return a}});
Ext.ux.form.Spinner.NumberStrategy=function(a){Ext.ux.form.Spinner.NumberStrategy.superclass.constructor.call(this,a)};
Ext.extend(Ext.ux.form.Spinner.NumberStrategy,Ext.ux.form.Spinner.Strategy,{allowDecimals:!0,decimalPrecision:2,spin:function(a,b,c){Ext.ux.form.Spinner.NumberStrategy.superclass.spin.call(this,a,b,c);var d=parseFloat(a.getValue());c=!0==c?this.alternateIncrementValue:this.incrementValue;!0==b?d-=c:d+=c;d=isNaN(d)?this.defaultValue:d;d=this.fixBoundries(d);a.setRawValue(d)},fixBoundries:function(a){void 0!=this.minValue&&a<this.minValue&&(a=this.minValue);void 0!=this.maxValue&&a>this.maxValue&&(a=
this.maxValue);return this.fixPrecision(a)},fixPrecision:function(a){var b=isNaN(a);return this.allowDecimals&&-1!=this.decimalPrecision&&!b&&a?parseFloat(parseFloat(a).toFixed(this.decimalPrecision)):b?"":a}});Ext.ux.form.Spinner.DateStrategy=function(a){Ext.ux.form.Spinner.DateStrategy.superclass.constructor.call(this,a)};
Ext.extend(Ext.ux.form.Spinner.DateStrategy,Ext.ux.form.Spinner.Strategy,{defaultValue:new Date,format:"Y-m-d",incrementValue:1,incrementConstant:Date.DAY,alternateIncrementValue:1,alternateIncrementConstant:Date.MONTH,spin:function(a,b,c){Ext.ux.form.Spinner.DateStrategy.superclass.spin.call(this);var d=a.getRawValue(),d=Date.parseDate(d,this.format);b=!0==b?-1:1;var f=!0==c?this.alternateIncrementValue:this.incrementValue;c=!0==c?this.alternateIncrementConstant:this.incrementConstant;"string"==
typeof this.defaultValue&&(this.defaultValue=Date.parseDate(this.defaultValue,this.format));d=d?d.add(c,b*f):this.defaultValue;d=this.fixBoundries(d);a.setRawValue(Ext.util.Format.date(d,this.format))},fixBoundries:function(a){var b="string"==typeof this.minValue?Date.parseDate(this.minValue,this.format):this.minValue,c="string"==typeof this.maxValue?Date.parseDate(this.maxValue,this.format):this.maxValue;void 0!=this.minValue&&a<b&&(a=b);void 0!=this.maxValue&&a>c&&(a=c);return a}});
Ext.ux.form.Spinner.TimeStrategy=function(a){Ext.ux.form.Spinner.TimeStrategy.superclass.constructor.call(this,a)};Ext.extend(Ext.ux.form.Spinner.TimeStrategy,Ext.ux.form.Spinner.DateStrategy,{format:"H:i",incrementValue:1,incrementConstant:Date.MINUTE,alternateIncrementValue:1,alternateIncrementConstant:Date.HOUR});Ext.ux.grid.filter.StringFilter=Ext.extend(Ext.ux.grid.filter.Filter,{updateBuffer:500,icon:"/img/small_icons/famfamfam/find.png",init:function(){var a=this.value=new Ext.ux.menu.EditableItem({icon:this.icon});a.on("keyup",this.onKeyUp,this);this.menu.add(a);this.updateTask=new Ext.util.DelayedTask(this.fireUpdate,this)},onKeyUp:function(a){a.getKey()==a.ENTER?this.menu.hide(!0):this.updateTask.delay(this.updateBuffer)},isActivatable:function(){return 0<this.value.getValue().length},fireUpdate:function(){this.active&&
this.fireEvent("update",this);this.setActive(this.isActivatable())},setValue:function(a){this.value.setValue(a);this.fireEvent("update",this)},getValue:function(){return this.value.getValue()},serialize:function(){var a={type:"string",value:this.getValue()};this.fireEvent("serialize",a,this);return a},validateRecord:function(a){a=a.get(this.dataIndex);return"string"!=typeof a?0==this.getValue().length:-1<a.toLowerCase().indexOf(this.getValue().toLowerCase())}});Ext.override(Date,{toUTC:function(){return this.add(Date.MINUTE,this.getTimezoneOffset())},fromUTC:function(){return this.add(Date.MINUTE,-this.getTimezoneOffset())}});Ext.ns("App");App.get_my_url=function(a){var b=this.map.getResolution(),c=Math.round((a.left-this.maxExtent.left)/(b*this.tileSize.w));a=Math.round((this.maxExtent.top-a.top)/(b*this.tileSize.h));c=this.map.getZoom()+"/"+c+"/"+a+"."+this.type;a=this.url;a instanceof Array&&(a=this.selectUrl(c,a));return a+this.service+"/ridge::"+this.radar+"-"+this.radarProduct+"-"+(null==this.radarTime?"0":this.radarTime.format("YmdHi"))+"/"+c};
var baseESRILayer=new OpenLayers.Layer.ArcGISCache("ESRI Topo","https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",{layerInfo:{currentVersion:10.2,serviceDescription:'This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone. The map includes administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, and airports overlaid on land cover and shaded relief imagery for added context. The map provides coverage for the world down to a scale of ~1:72k. Coverage is provided down to ~1:4k for the following areas: Australia and New Zealand; India; Europe; Canada; Mexico; the continental United States and Hawaii; South America and Central America; Africa; and most of the Middle East. Coverage down to ~1:1k and ~1:2k is available in select urban areas. This basemap was compiled from a variety of best available sources from several data providers, including the U.S. Geological Survey (USGS), U.S. Environmental Protection Agency (EPA), U.S. National Park Service (NPS), Food and Agriculture Organization of the United Nations (FAO), Department of Natural Resources Canada (NRCAN), GeoBase, Agriculture and Agri-Food Canada, DeLorme, HERE, Esri, OpenStreetMap contributors, and the GIS User Community. For more information on this map, including the terms of use, visit us <a href="http://goto.arcgisonline.com/maps/World_Topo_Map " target="_new" >online</a>.',
mapName:"Layers",description:"This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone. The map includes administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, and airports overlaid on land cover and shaded relief imagery for added context. The map provides coverage for the world down to a scale of ~1:72k. Coverage is provided down to ~1:4k for the following areas: Australia and New Zealand; India; Europe; Canada; Mexico; the continental United States and Hawaii; South America and Central America; Africa; and most of the Middle East. Coverage down to ~1:1k and ~1:2k is available in select urban areas. This basemap was compiled from a variety of best available sources from several data providers, including the U.S. Geological Survey (USGS), U.S. Environmental Protection Agency (EPA), U.S. National Park Service (NPS), Food and Agriculture Organization of the United Nations (FAO), Department of Natural Resources Canada (NRCAN), GeoBase, Agriculture and Agri-Food Canada, DeLorme, HERE, Esri, OpenStreetMap contributors, and the GIS User Community. For more information on this map, including our terms of use, visit us online at http://goto.arcgisonline.com/maps/World_Topo_Map",
copyrightText:"Sources: Esri, HERE, DeLorme, TomTom, Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), swisstopo, MapmyIndia, \u00a9 OpenStreetMap contributors, and the GIS User Community",supportsDynamicLayers:!1,layers:[{id:0,name:"Citations",parentLayerId:-1,defaultVisibility:!1,subLayerIds:null,minScale:0,maxScale:0}],tables:[],spatialReference:{wkid:102100,latestWkid:3857},singleFusedMapCache:!0,tileInfo:{rows:256,
cols:256,dpi:96,format:"JPEG",compressionQuality:90,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100,latestWkid:3857},lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8},{level:1,resolution:78271.51696399994,scale:2.95828763795777E8},{level:2,resolution:39135.75848200009,scale:1.47914381897889E8},{level:3,resolution:19567.87924099992,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,
scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},
{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:0.5971642835598172,scale:2256.994353},{level:19,resolution:0.29858214164761665,scale:1128.497176}]},initialExtent:{xmin:-1.9003965069419548E7,ymin:-236074.10024122056,xmax:1.9003965069419548E7,ymax:1.458937939490844E7,spatialReference:{cs:"pcs",wkid:102100}},
fullExtent:{xmin:-2.0037507067161843E7,ymin:-1.9971868880408604E7,xmax:2.0037507067161843E7,ymax:1.997186888040863E7,spatialReference:{cs:"pcs",wkid:102100}},minScale:5.91657527591555E8,maxScale:1128.497176,units:"esriMeters",supportedImageFormatTypes:"PNG32,PNG24,PNG,JPG,DIB,TIFF,EMF,PS,PDF,GIF,SVG,SVGZ,BMP",documentInfo:{Title:"World Topographic Map",Author:"Esri",Comments:"",Subject:"topographic, topography, administrative boundaries, cities, water features, physiographic features, parks, landmarks, highways, roads, railways, airports, land cover, shaded relief imagery",
Category:"imageryBaseMapsEarthCover (Imagery, basemaps, and land cover)",AntialiasingMode:"None",TextAntialiasingMode:"Force",Keywords:"World,Global,Europe,North America,South America,Southern Africa,Australia,New Zealand,India"},capabilities:"Map,Query,Data",supportedQueryFormats:"JSON, AMF",exportTilesAllowed:!1,maxRecordCount:1E3,maxImageHeight:4096,maxImageWidth:4096,supportedExtensions:"KmlServer"}});
App.RadarPanel=Ext.extend(GeoExt.MapPanel,{p4326:new OpenLayers.Projection("EPSG:4326"),p900913:new OpenLayers.Projection("EPSG:900913"),vtec:null,vteckml:null,countykml:null,selectControl:null,initComponent:function(){var a={tbar:{xtype:"container",layout:"anchor",defaults:{height:27,anchor:"100%"},items:[new Ext.Toolbar({items:[{xtype:"tbtext",text:"Opacity"},{xtype:"gx_opacityslider",name:"opacity",width:70,value:80},"-",{xtype:"tbtext",text:"RADAR Info:"},{xtype:"tbtext",name:"status",text:"---"},
"-",{xtype:"button",name:"legend",text:"Show Legend",enableToggle:!0,toggleHandler:function(a,c){Ext.getCmp("legendWindow")&&(c?Ext.getCmp("legendWindow").show():Ext.getCmp("legendWindow").hide())}}]}),new Ext.Toolbar({items:[{xtype:"combo",name:"radar",disabled:!0,editable:!1,forceSelection:!0,store:new Ext.data.JsonStore({autoDestroy:!0,autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"/json/radar",method:"GET"}),root:"radars",fields:[{name:"id"},{name:"name"},{name:"full",convert:function(a,c){return"["+
c.id+"] "+c.name}}]}),valueField:"id",width:220,displayField:"full",typeAhead:!0,mode:"local",triggerAction:"all",emptyText:"Select RADAR...",selectOnFocus:!0,lazyRender:!0},"-",{xtype:"combo",name:"product",disabled:!0,editable:!1,forceSelection:!0,store:new Ext.data.JsonStore({autoDestroy:!0,autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"/json/radar",method:"GET"}),root:"products",fields:[{name:"id"},{name:"name"},{name:"full",convert:function(a,c){return"["+c.id+"] "+c.name}}]}),valueField:"id",
width:220,displayField:"full",typeAhead:!0,mode:"local",triggerAction:"all",emptyText:"Select Product...",selectOnFocus:!0,lazyRender:!0},"-",{xtype:"tbtext",text:"Time:"},{xtype:"slider",name:"tslider",disabled:!0,plugins:[new Ext.slider.Tip({getText:function(a){return 1==a.slider.maxValue?"No Times Available":a.slider.store.getAt(a.value-1).get("ts").fromUTC().format("Y-m-d g:i A T")}})],store:new Ext.data.JsonStore({autoDestroy:!0,autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"../json/radar",method:"GET"}),
root:"scans",fields:[{name:"ts",type:"date",dateFormat:"Y-m-d\\TH:i\\Z"}]}),width:120,minValue:1,maxValue:1,increment:1}]})]},map:{allOverlays:!1,projection:new OpenLayers.Projection("EPSG:900913"),units:"m",numZoomLevels:18,maxResolution:156543.0339,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoom,new OpenLayers.Control.ArgParser],maxExtent:new OpenLayers.Bounds(-20037508,-20037508,20037508,2.003750834E7)},controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoom,
new OpenLayers.Control.ArgParser],layers:[baseESRILayer,new OpenLayers.Layer.TMS("RADAR","/cache/tile.py/",{layername:"cwsu-900913",service:"1.0.0",type:"png",visibility:!0,isBaseLayer:!1,opacity:1,getURL:App.get_my_url,radarProduct:"N0Q",radar:"DMX",radarTime:null}),new OpenLayers.Layer.WMS("Counties","/c/c.py/",{layers:"c-900913",format:"image/png",transparent:"true"},{opacity:1,singleTile:!1,isBaseLayer:!1,visibility:!1,buffer:0}),App.SBWFeatureStore.layer,App.LSRFeatureStore.layer,App.SBWIntersectionFeatureStore.layer],
extent:new OpenLayers.Bounds(-14427682,1423562,-7197350,8673462)};Ext.apply(this,Ext.apply(this.initialConfig,a));App.RadarPanel.superclass.initComponent.call(this);this.doLayout();this.hookUpListeners();ls=new OpenLayers.Control.LayerSwitcher;this.map.addControl(ls);ls.maximizeControl()},setVTEC:function(a){this.vtec=a;if(this.map){var b=new OpenLayers.LonLat((this.vtec.x1+this.vtec.x0)/2,(this.vtec.y1+this.vtec.y0)/2);this.setCenterPoint(b,9);App.LSRFeatureStore.reload({add:!1,params:{sts:a.issue.format("YmdHi"),
ets:a.expire.format("YmdHi"),phenomena:a.phenomena,significance:a.significance,eventid:a.eventid,year:a.year,wfo:a.wfo}});App.SBWFeatureStore.reload({add:!1,params:{sts:a.issue.format("YmdHi"),ets:a.expire.format("YmdHi"),phenomena:a.phenomena,significance:a.significance,eventid:a.eventid,year:a.year,wfo:a.wfo}});App.SBWIntersectionFeatureStore.reload({add:!1,params:{sts:a.issue.format("YmdHi"),ets:a.expire.format("YmdHi"),phenomena:a.phenomena,significance:a.significance,eventid:a.eventid,year:a.year,
wfo:a.wfo}});this.countykml="/kml/sbw_county_intersect.php?"+Ext.urlEncode(this.vtec);this.lsrkml="/kml/sbw_lsrs.php?"+Ext.urlEncode(this.vtec);this.vteckml="/kml/vtec.php?"+Ext.urlEncode(this.vtec);this.placefile="/request/grx/vtec.php?"+Ext.urlEncode(this.vtec);this.updateURL()}},setRadar:function(a){this.getRadarLayer().radar=a;this.getToolbar("radar").setValue(a);this.loadProducts()},setProduct:function(a){this.getRadarLayer().radarProduct=a;this.getToolbar("product").setValue(a);this.loadTimes();
lw=Ext.getCmp("legendWindow");lw||(lw=new Ext.Window({id:"legendWindow",closeAction:"hide",title:"N0R",closable:!1,html:'<img src="/GIS/legends/N0R.gif" />'}),lw.show(),lw.hide());"undefined"!==lw&&(lw.setTitle(a),lw.update('<img src="/GIS/legends/'+a+'.gif" />'))},setTime:function(a){null!=a&&(this.getRadarLayer().radarTime=a);a=this.getRadarLayer();this.getFooterbar("status").update(a.radar+" "+a.radarProduct+" "+a.radarTime.fromUTC().format("d M Y g:i A T"));a.setName("RADAR: "+a.radar+" "+a.radarProduct);
a.setVisibility(!0);a.redraw();this.updateURL()},updateURL:function(){window.location.href="#"+this.vtec.year+"-O-NEW-K"+this.vtec.wfo+"-"+this.vtec.phenomena+"-"+this.vtec.significance+"-"+String.leftPad(this.vtec.eventid,4,"0")+"/"+this.getRadarLayer().radar+"-"+this.getRadarLayer().radarProduct+"-"+(null==this.getRadarLayer().radarTime?"0":this.getRadarLayer().radarTime.format("YmdHi"))},hookUpListeners:function(){this.getToolbar("radar").on("select",function(a,b){this.setRadar(b.get("id"))},this);
this.getToolbar("radar").store.on("load",function(a,b,c){0==a.getCount()?(Ext.MessageBox.show({title:"No Data Found",width:300,msg:"Sorry, no RADARs were available for this time.",buttons:Ext.MessageBox.OK}),this.getToolbar("radar").disable(),this.getToolbar("product").disable(),this.getToolbar("tslider").disable()):(this.getToolbar("radar").enable(),App.initRadar?(this.setRadar(App.initRadar),delete App.initRadar):this.setRadar(b[0].get("id")))},this);this.getToolbar("product").on("select",function(a,
b){this.setProduct(b.get("id"))},this);this.getToolbar("product").store.on("load",function(a,b,c){0==a.getCount()?(Ext.MessageBox.show({title:"No Data Found",width:300,msg:"Sorry, no RADAR products were found for this time. Please try another RADAR source.",buttons:Ext.MessageBox.OK}),this.getToolbar("product").disable(),this.getToolbar("tslider").disable()):(this.getToolbar("product").enable(),App.initRadarProduct?(this.getToolbar("product").setValue(App.initRadarProduct),this.setProduct(App.initRadarProduct),
delete App.initRadarProduct):-1<a.find("id","N0Q")?(this.getToolbar("product").setValue("N0Q"),this.setProduct("N0Q")):-1<a.find("id","N0R")?(this.getToolbar("product").setValue("N0R"),this.setProduct("N0R")):this.setProduct(b[0].get("id")))},this);this.getToolbar("tslider").on("changecomplete",function(a,b){this.setTime(a.store.getAt(b-1).get("ts"))},this);this.getToolbar("tslider").store.on("load",function(a,b,c){0==a.getCount()?(Ext.MessageBox.show({title:"No Data Found",width:300,msg:"Sorry, no RADAR scans were found for this time. Please try another RADAR source or product.",
buttons:Ext.MessageBox.OK}),this.getToolbar("tslider").disable()):(this.getToolbar("tslider").enable(),this.getToolbar("tslider").maxValue=a.getCount(),App.initRadarTime?(a=a.find("ts",App.initRadarTime),-1<a&&(this.getToolbar("tslider").setValue(a+1),this.setTime(App.initRadarTime)),delete App.initRadarTime):(this.getToolbar("tslider").setValue(1),this.setTime(b[0].get("ts")),this.getRadarLayer().setVisibility(!0)))},this);this.getFooterbar("opacity").setLayer(this.getRadarLayer())},loadProducts:function(){this.getRadarLayer().setVisibility(!1);
this.getToolbar("product").store.removeAll();this.getToolbar("product").store.load({params:{operation:"products",radar:this.getToolbar("radar").getValue(),start:this.vtec.radarstart.format("Y-m-d\\TH:i\\Z")}})},loadTimes:function(){this.getToolbar("tslider").store.load({params:{operation:"list",product:this.getToolbar("product").getValue(),radar:this.getToolbar("radar").getValue(),start:this.vtec.radarstart.format("Y-m-d\\TH:i\\Z"),end:this.vtec.radarend.format("Y-m-d\\TH:i\\Z")}})},getToolbar:function(a){return this.toolbars[0].find("name",
a)[0]},getFooterbar:function(a){return this.toolbars[0].find("name",a)[0]},setCenterPoint:function(a){this.getToolbar("radar").store.load({params:{start:this.vtec.radarstart.format("Y-m-d\\TH:i\\Z"),operation:"available",lat:a.lat,lon:a.lon}});this.map.setCenter(a.transform(this.p4326,this.p900913),8);null==this.selectControl&&(this.selectControl=new OpenLayers.Control.SelectFeature([App.SBWFeatureStore.layer,App.LSRFeatureStore.layer]),this.map.addControl(this.selectControl),this.selectControl.activate())},
getRadarLayer:function(){return this.layers.getAt(1).data.layer},afterRender:function(){App.RadarPanel.superclass.afterRender.call(this)}});Ext.reg("radarpanel",App.RadarPanel);Ext.ns("App");App.lsrStyleMap=new OpenLayers.StyleMap({"default":{externalGraphic:"../lsr/icons/other.png",fillOpacity:1,pointRadius:10},select:{fillOpacity:1,pointRadius:15}});
var lsrLookup={0:{externalGraphic:"../lsr/icons/tropicalstorm.gif"},1:{externalGraphic:"../lsr/icons/flood.png"},2:{externalGraphic:"../lsr/icons/other.png"},3:{externalGraphic:"../lsr/icons/other.png"},4:{externalGraphic:"../lsr/icons/other.png"},5:{externalGraphic:"../lsr/icons/ice.png"},6:{externalGraphic:"../lsr/icons/cold.png"},7:{externalGraphic:"../lsr/icons/cold.png"},8:{externalGraphic:"../lsr/icons/fire.png"},9:{externalGraphic:"../lsr/icons/other.png"},a:{externalGraphic:"../lsr/icons/other.png"},
A:{externalGraphic:"../lsr/icons/wind.png"},B:{externalGraphic:"../lsr/icons/downburst.png"},C:{externalGraphic:"../lsr/icons/funnelcloud.png"},D:{externalGraphic:"../lsr/icons/winddamage.png"},E:{externalGraphic:"../lsr/icons/flood.png"},F:{externalGraphic:"../lsr/icons/flood.png"},G:{externalGraphic:"../lsr/icons/wind.png"},H:{externalGraphic:"../lsr/icons/hail.png"},I:{externalGraphic:"../lsr/icons/hot.png"},J:{externalGraphic:"../lsr/icons/fog.png"},K:{externalGraphic:"../lsr/icons/lightning.gif"},
L:{externalGraphic:"../lsr/icons/lightning.gif"},M:{externalGraphic:"../lsr/icons/wind.png"},N:{externalGraphic:"../lsr/icons/wind.png"},O:{externalGraphic:"../lsr/icons/wind.png"},P:{externalGraphic:"../lsr/icons/other.png"},Q:{externalGraphic:"../lsr/icons/tropicalstorm.gif"},R:{externalGraphic:"../lsr/icons/heavyrain.png"},s:{externalGraphic:"../lsr/icons/sleet.png"},S:{externalGraphic:"../lsr/icons/snow.png"},T:{externalGraphic:"../lsr/icons/tornado.png"},U:{externalGraphic:"../lsr/icons/fire.png"},
V:{externalGraphic:"../lsr/icons/avalanche.gif"},W:{externalGraphic:"../lsr/icons/waterspout.png"},X:{externalGraphic:"../lsr/icons/funnelcloud.png"},Z:{externalGraphic:"../lsr/icons/blizzard.png"}};App.lsrStyleMap.addUniqueValueRules("default","type",lsrLookup);
App.LSRFeatureStore=new GeoExt.data.FeatureStore({layer:new OpenLayers.Layer.Vector("Local Storm Reports",{styleMap:App.lsrStyleMap,sphericalMercator:!0,eventListeners:{featureselected:function(a){feature=a.feature;record=App.LSRFeatureStore.getByFeature(feature);html="Time: "+record.data.valid.format("Y-m-d g:i A T")+"<br />Event: "+feature.data.magnitude+" "+feature.data.typetext+"<br />Source: "+feature.data.source+"<br />Remark: "+feature.data.remark;popup=new GeoExt.Popup({map:this.map,location:feature,
feature:feature,title:feature.data.wfo+": "+feature.data.city,width:200,html:html,collapsible:!0});popup.on({close:function(){-1<OpenLayers.Util.indexOf(App.LSRFeatureStore.layer.selectedFeatures,this.feature)&&this.map.controls[4].unselect(this.feature)}});popup.show()}},maxExtent:new OpenLayers.Bounds(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7)}),fields:[{name:"wfo",type:"string"},{name:"valid",type:"date"},{name:"county"},{name:"city"},{name:"st",type:"string"},{name:"typetext",
type:"string"},{name:"remark"},{name:"prodlinks"},{name:"wfo"},{name:"source"},{name:"magnitude",type:"float"},{name:"lat",type:"float"},{name:"lon",type:"float"}],proxy:new GeoExt.data.ProtocolProxy({protocol:new OpenLayers.Protocol.HTTP({url:"/geojson/lsr.php?inc_ap=yes",format:new OpenLayers.Format.GeoJSON({externalProjection:new OpenLayers.Projection("EPSG:4326"),internalProjection:new OpenLayers.Projection("EPSG:900913")})})}),autoLoad:!1});Ext.ns("App");App.sbwStyleMap=new OpenLayers.StyleMap({"default":{strokeColor:"black",strokeWidth:3,fillOpacity:0,strokeOpacity:1},select:{strokeWidth:5}});
var sbwLookup={AS:{strokeColor:"black"},BW:{strokeColor:"black"},BZ:{strokeColor:"black"},CF:{strokeColor:"black"},DS:{strokeColor:"black"},DU:{strokeColor:"black"},EC:{strokeColor:"black"},EH:{strokeColor:"black"},FG:{strokeColor:"black"},FR:{strokeColor:"black"},FW:{strokeColor:"black"},FZ:{strokeColor:"black"},GL:{strokeColor:"black"},HT:{strokeColor:"black"},HU:{strokeColor:"black"},HW:{strokeColor:"black"},HY:{strokeColor:"black"},HZ:{strokeColor:"black"},IS:{strokeColor:"black"},LE:{strokeColor:"black"},
LO:{strokeColor:"black"},LS:{strokeColor:"black"},LW:{strokeColor:"black"},MF:{strokeColor:"black"},MS:{strokeColor:"black"},RB:{strokeColor:"black"},RP:{strokeColor:"black"},SC:{strokeColor:"black"},SE:{strokeColor:"black"},SI:{strokeColor:"black"},SM:{strokeColor:"black"},SR:{strokeColor:"black"},SU:{strokeColor:"black"},SW:{strokeColor:"black"},TR:{strokeColor:"black"},TS:{strokeColor:"black"},UP:{strokeColor:"black"},WC:{strokeColor:"black"},WI:{strokeColor:"black"},WS:{strokeColor:"black"},WW:{strokeColor:"black"},
ZF:{strokeColor:"black"},ZR:{strokeColor:"black"},TO:{strokeColor:"red"},MA:{strokeColor:"purple"},FF:{strokeColor:"green"},EW:{strokeColor:"green"},FA:{strokeColor:"green"},FL:{strokeColor:"green"},FF:{strokeColor:"green"},SV:{strokeColor:"yellow"}};App.sbwStyleMap.addUniqueValueRules("default","phenomena",sbwLookup);
App.SBWFeatureStore=new GeoExt.data.FeatureStore({layer:new OpenLayers.Layer.Vector("VTEC Product",{styleMap:App.sbwStyleMap,sphericalMercator:!0,eventListeners:{featureselected:function(a){feature=a.feature;record=App.SBWFeatureStore.getByFeature(feature);html="Issue: "+record.data.issue.format("Y-m-d g:i A T")+"<br />Expire: "+record.data.expire.format("Y-m-d g:i A T");popup=new GeoExt.Popup({map:this.map,location:a.feature,feature:a.feature,title:"Event",width:200,html:html,collapsible:!0});popup.on({close:function(){-1<
OpenLayers.Util.indexOf(App.SBWFeatureStore.layer.selectedFeatures,this.feature)&&this.map.controls[4].unselect(this.feature)}});popup.show()}},visibility:!0,maxExtent:new OpenLayers.Bounds(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7)}),fields:[{name:"wfo"},{name:"issue",type:"date"},{name:"expire",type:"date"},{name:"phenomena"},{name:"significance"},{name:"eventid",type:"int"},{name:"link"}],proxy:new GeoExt.data.ProtocolProxy({protocol:new OpenLayers.Protocol.HTTP({url:"/geojson/sbw.php?",
format:new OpenLayers.Format.GeoJSON({externalProjection:new OpenLayers.Projection("EPSG:4326"),internalProjection:new OpenLayers.Projection("EPSG:900913")})})}),autoLoad:!1});Ext.ns("App");App.sbwIStyleMap=new OpenLayers.StyleMap({"default":{strokeColor:"black",strokeWidth:6,fillOpacity:0,strokeOpacity:1},select:{strokeWidth:5}});
App.SBWIntersectionFeatureStore=new GeoExt.data.FeatureStore({layer:new OpenLayers.Layer.Vector("County Intersection",{styleMap:App.sbwIStyleMap,sphericalMercator:!0,visibility:!1,maxExtent:new OpenLayers.Bounds(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7)}),fields:[{name:"sz"}],proxy:new GeoExt.data.ProtocolProxy({protocol:new OpenLayers.Protocol.HTTP({url:"../geojson/sbw_county_intersect.php?",format:new OpenLayers.Format.GeoJSON({externalProjection:new OpenLayers.Projection("EPSG:4326"),
internalProjection:new OpenLayers.Projection("EPSG:900913")})})}),autoLoad:!1});Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(a){a.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(a,b,c){this.show();this.body.update(this.getText(c));this.doAutoWidth();this.el.alignTo(c.el,"b-t?",this.offsets)},getText:function(a){return String(a.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.BLANK_IMAGE_URL="/ext/resources/images/default/s.gif";Ext.ns("App");
Ext.onReady(function(){function a(){return{year:v.getValue(),wfo:n.getValue(),phenomena:h.getValue(),eventid:q.getValue(),significance:s.getValue()}}function b(){switch(h.getValue()){case "TO":break;case "SV":break;case "MA":break;case "FF":break;default:return"<p>Storm Based Warning history unavailable</p>"}return'<p><img style="width:640px;height:480px;" src="../GIS/sbw-history.php?vtec='+v.getValue()+".K"+n.getValue()+"."+h.getValue()+"."+s.getValue()+"."+String.leftPad(q.getValue(),4,"0")+'" /></p>'}
function c(){switch(h.getValue()){case "TO":r="layers[]=nexrad&layers[]=sbw&layers[]=sbwh&";break;case "SV":r="layers[]=nexrad&layers[]=sbw&layers[]=sbwh&";break;case "MA":r="layers[]=nexrad&layers[]=sbw&layers[]=sbwh&";break;case "BZ":r="layers[]=nexrad&";break;case "FF":r="layers[]=nexrad&layers[]=sbw&layers[]=sbwh&";break;case "FL":r="layers[]=nexrad&";break;case "HS":r="layers[]=nexrad&";break;case "HP":r="layers[]=nexrad&";break;case "IS":r="layers[]=nexrad&";break;case "IP":r="layers[]=nexrad&";
break;case "SN":r="layers[]=nexrad&";break;case "WS":r="layers[]=nexrad&";break;case "WW":r="layers[]=nexrad&";break;case "ZR":r="layers[]=nexrad&";break;default:r="layers[]=cbw&layers[]=legend&"}"W"!=s.getValue()&&(r="layers[]=cbw&layers[]=legend&","TO"==h.getValue()||"SV"==h.getValue())&&(r="layers[]=nexrad&layers[]=cbw&layers[]=legend&");return'<p><img style="width:640px;height:480px;" src="../GIS/radmap.php?'+r+"layers[]=uscounties&vtec="+v.getValue()+".O.NEW.K"+n.getValue()+"."+h.getValue()+
"."+s.getValue()+"."+String.leftPad(q.getValue(),4,"0")+'" /></p>'}Ext.ux.Printer.PanelRenderer=Ext.extend(Ext.ux.Printer.BaseRenderer,{generateBody:function(a){return String.format("<div class='x-panel-print'>{0}</div>",a.body.dom.innerHTML)}});Ext.ux.Printer.registerRenderer("panel",Ext.ux.Printer.PanelRenderer);Ext.ux.Printer.BaseRenderer.prototype.stylesheetPath="print.css";var d,f,g,e,k,t,u,w=!1,x,n,l,A=new Ext.ux.grid.GridFilters({filters:[{type:"string",dataIndex:"locations"}],phpMode:!1,local:!0}),
y=new Ext.grid.RowExpander({id:"testexp",width:30,tpl:new Ext.Template("<p><b>Remark:</b> {remark}<br>")}),z=new Ext.grid.RowExpander({id:"testexp2",width:30,tpl:new Ext.Template("<p><b>Remark:</b> {remark}<br>")}),B=new Ext.data.Store({root:"products",autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"json-list.php",method:"GET"}),reader:new Ext.data.JsonReader({root:"products",id:"id"},[{name:"id",type:"int"},{name:"locations"},{name:"wfo"},{name:"year"},{name:"area",type:"float"},{name:"significance"},
{name:"phenomena"},{name:"eventid",type:"int"},{name:"issued",type:"date"},{name:"expired",type:"date"},{name:"product_issued",type:"date"},{name:"init_expired",type:"date"}])}),C=new Ext.data.Store({root:"ugcs",autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"json-ugc.php",method:"GET"}),reader:new Ext.data.JsonReader({root:"ugcs",id:"id"},[{name:"id"},{name:"ugc"},{name:"name"},{name:"status"},{name:"issued",type:"date"},{name:"expired",type:"date"},{name:"product_issued",type:"date"},{name:"init_expired",
type:"date"}])}),D=new Ext.data.Store({autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"json-lsrs.php",method:"GET"}),reader:new Ext.data.JsonReader({root:"lsrs",id:"id"},[{name:"id"},{name:"valid"},{name:"type"},{name:"event"},{name:"magnitude"},{name:"city"},{name:"county"},{name:"remark"}])}),E=new Ext.data.Store({autoLoad:!1,proxy:new Ext.data.HttpProxy({url:"json-lsrs.php",method:"GET"}),reader:new Ext.data.JsonReader({root:"lsrs",id:"id"},[{name:"id"},{name:"valid"},{name:"type"},{name:"event"},
{name:"magnitude"},{name:"city"},{name:"county"},{name:"remark"}])});n=new Ext.form.ComboBox({hiddenName:"wfo",store:new Ext.data.SimpleStore({fields:["abbr","wfo"],data:iemdata.wfos}),valueField:"abbr",width:180,fieldLabel:"Issuing Office",displayField:"wfo",typeAhead:!0,tpl:'<tpl for="."><div class="x-combo-list-item">[{abbr}] {wfo}</div></tpl>',mode:"local",triggerAction:"all",emptyText:"Select/or type here...",selectOnFocus:!0,lazyRender:!0,id:"wfoselector"});var h=new Ext.form.ComboBox({hiddenName:"phenomena",
store:new Ext.data.SimpleStore({fields:["abbr","name"],data:iemdata.vtec_phenomena_dict}),tpl:'<tpl for="."><div class="x-combo-list-item">[{abbr}] {name}</div></tpl>',valueField:"abbr",displayField:"name",fieldLabel:"Phenomena",width:180,typeAhead:!0,mode:"local",triggerAction:"all",emptyText:"Select a Phenomena...",selectOnFocus:!0,lazyRender:!0,id:"phenomenaselector"}),s=new Ext.form.ComboBox({hiddenName:"significance",store:new Ext.data.SimpleStore({fields:["abbr","name"],data:iemdata.vtec_sig_dict}),
valueField:"abbr",displayField:"name",fieldLabel:"Significance",typeAhead:!0,mode:"local",triggerAction:"all",emptyText:"Select a Significance...",selectOnFocus:!0,lazyRender:!0,width:100,id:"significanceselector"}),q=new Ext.ux.form.Spinner({fieldLabel:"Event Number",name:"eventid",id:"eventid",width:60,strategy:new Ext.ux.form.Spinner.NumberStrategy({minValue:"1",maxValue:"9999"})});q.on("spin",function(){l||(l=new Ext.util.DelayedTask(function(){m.load({params:a()});l=null}),l.delay(500))});var v=
new Ext.ux.form.Spinner({fieldLabel:"Year",name:"year",id:"yearselector",width:60,strategy:new Ext.ux.form.Spinner.NumberStrategy({minValue:cfg.startYear,maxValue:new Date("Y")})});v.on("spin",function(){l||(l=new Ext.util.DelayedTask(function(){m.load({params:a()});l=null}),l.delay(500))});var m=new Ext.data.Store({root:"meta",autoLoad:!1,id:"metastore",recordType:Ext.grid.PropertyRecord,proxy:new Ext.data.HttpProxy({url:"json-meta.php",method:"GET"}),reader:new Ext.data.JsonReader({root:"meta",
id:"id"},[{name:"x0",type:"float"},{name:"x1",type:"float"},{name:"y0",type:"float"},{name:"y1",type:"float"},{name:"issue",type:"date",dateFormat:"Y-m-d H:i"},{name:"expire",type:"date",dateFormat:"Y-m-d H:i"},{name:"radarstart",type:"date",dateFormat:"Y-m-d H:i"},{name:"radarend",type:"date",dateFormat:"Y-m-d H:i"}])});m.on("load",function(b,c,l){w=!1;0==m.getCount()?(Ext.getCmp("mainPanel").items.each(function(a){a.saveme||a.disable()}),Ext.getCmp("mainPanel").activate("products-grid"),u.getStore().load({params:a()})):
(Ext.getCmp("mainPanel").activate(3),b=b.getAt(0),Ext.getCmp("googlepanel").setVTEC({year:v.getValue(),wfo:n.getValue(),phenomena:h.getValue(),eventid:q.getValue(),significance:s.getValue(),x0:b.data.x0,x1:b.data.x1,y0:b.data.y0,y1:b.data.y1,radarstart:b.data.radarstart,radarend:b.data.radarend,issue:b.data.issue,expire:b.data.expire}),Ext.fly(x.getEl()).update(n.getRawValue()+" "+h.getRawValue()+" "+s.getRawValue()+" #"+q.getValue()+" issued "+m.getAt(0).data.issue.format("Y-m-d H:i")+" UTC expires "+
m.getAt(0).data.expire.format("Y-m-d H:i")+" UTC"),Ext.getCmp("mainPanel").items.each(function(a){a.enable()}),d.isLoaded&&(d.isLoaded=!1,d.fireEvent("activate",{})),k.isLoaded&&(k.isLoaded=!1,k.fireEvent("activate",{})),e.isLoaded&&(e.isLoaded=!1,e.fireEvent("activate",{})),f.isLoaded&&(f.isLoaded=!1,f.getStore().load({params:a()})),g.isLoaded&&(g.isLoaded=!1,g.getStore().load({params:a()})),t.isLoaded&&(t.isLoaded=!1,t.getStore().load({params:a()})),u.isLoaded&&(u.isLoaded=!1,u.getStore().load({params:a()})))});
new Ext.ux.SliderTip({getText:function(a){return String.format("<b>{0} GMT</b>",(new Date(a.getValue())).format("Y-m-d H:i"))}});var F=new Ext.FormPanel({frame:!0,id:"mainform",labelAlign:"top",items:[n,h,s,q,v,{xtype:"button",text:"Update Page",id:"mainbutton",style:{marginBottom:"10px"},listeners:{click:function(){m.load({params:a()})}}},{xtype:"button",text:"LSR KML Source",icon:"icons/kml.jpg",cls:"x-btn-text-icon",style:{marginBottom:"10px"},listeners:{click:function(){window.location.href=Ext.getCmp("googlepanel").lsrkml}}},
{xtype:"button",text:"Warning KML Source",icon:"icons/kml.jpg",cls:"x-btn-text-icon",style:{marginBottom:"10px"},listeners:{click:function(){window.location.href=Ext.getCmp("googlepanel").vteckml}}},{xtype:"button",text:"County Intersection KML",icon:"icons/kml.jpg",cls:"x-btn-text-icon",style:{marginBottom:"10px"},listeners:{click:function(){window.location.href=Ext.getCmp("googlepanel").countykml}}},{xtype:"button",text:"GR Placefile Format",icon:"icons/kml.jpg",cls:"x-btn-text-icon",listeners:{click:function(){window.location.href=
Ext.getCmp("googlepanel").placefile}}}]});d=new Ext.TabPanel({title:"Text Data",enableTabScroll:!0,isLoaded:!1,id:"textTabPanel",disabled:!0,defaults:{bodyStyle:"padding:5px"}});d.on("activate",function(){d.isLoaded||(textTabsLoad(),d.isLoaded=!0)});textTabsLoad=function(){Ext.Ajax.request({waitMsg:"Loading...",url:"json-text.php",params:a(),method:"GET",success:function(a,b){var c=Ext.util.JSON.decode(a.responseText);d.items.each(function(a){d.remove(a)});for(var f="<pre>"+c.data[0].report+"</pre>",
e=0;e<c.data[0].svs.length;e++)f=f+"<pre>"+c.data[0].svs[e]+"</pre>";d.add({title:"All",html:f,xtype:"panel",autoScroll:!0,tbar:[{text:"Print Text",icon:"icons/print.png",cls:"x-btn-text-icon",handler:function(){Ext.ux.Printer.print(Ext.getCmp("textTabPanel").getActiveTab())}}]});d.add({title:"Issuance",html:"<pre>"+c.data[0].report+"</pre>",xtype:"panel",autoScroll:!0,tbar:[{text:"Print Text",icon:"icons/print.png",cls:"x-btn-text-icon",handler:function(){Ext.ux.Printer.print(Ext.getCmp("textTabPanel").getActiveTab())}}]});
for(e=0;e<c.data[0].svs.length;e++)d.add({title:"Update "+(e+1),html:"<pre>"+c.data[0].svs[e]+"</pre>",xtype:"panel",autoScroll:!0,tbar:[{text:"Print Text",icon:"icons/print.png",cls:"x-btn-text-icon",handler:function(){Ext.ux.Printer.print(Ext.getCmp("textTabPanel").getActiveTab())}}]});d.activate(e);d.isLoaded=!0}})};f=new Ext.grid.GridPanel({id:"lsrGridPanel",isLoaded:!1,store:D,disabled:!0,loadMask:{msg:"Loading Data..."},cm:new Ext.grid.ColumnModel([y,{header:"Time",sortable:!0,dataIndex:"valid"},
{header:"Event",width:100,sortable:!0,dataIndex:"event"},{header:"Magnitude",sortable:!0,dataIndex:"magnitude"},{header:"City",width:200,sortable:!0,dataIndex:"city"},{header:"County",sortable:!0,dataIndex:"county"}]),stripeRows:!0,title:"Storm Reports within SBW",plugins:y,autoScroll:!0});f.on("activate",function(b){this.isLoaded||(p=a(),p.sbw="1",this.getStore().load({params:p}),this.isLoaded=!0)});g=new Ext.grid.GridPanel({id:"allLsrGridPanel",title:"All Storm Reports",isLoaded:!1,store:E,disabled:!0,
loadMask:{msg:"Loading Data..."},cm:new Ext.grid.ColumnModel([z,{header:"Time (UTC)",sortable:!0,dataIndex:"valid"},{header:"Event",width:100,sortable:!0,dataIndex:"event"},{header:"Magnitude",sortable:!0,dataIndex:"magnitude"},{header:"City",width:200,sortable:!0,dataIndex:"city"},{header:"County",sortable:!0,dataIndex:"county"}]),stripeRows:!0,plugins:z,autoScroll:!0});g.on("activate",function(b){this.isLoaded||(this.getStore().load({params:a()}),this.isLoaded=!0)});t=new Ext.grid.GridPanel({id:"ugc-grid",
store:C,loadMask:{msg:"Loading Data..."},cm:new Ext.grid.ColumnModel([{header:"UGC",width:50,sortable:!0,dataIndex:"ugc"},{header:"Name",width:100,sortable:!0,dataIndex:"name"},{header:"Status",width:50,sortable:!0,dataIndex:"status"},{header:"Product Issued",width:140,sortable:!0,dataIndex:"product_issued",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"VTEC Issued",width:140,sortable:!0,dataIndex:"issued",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"Initial Expire",width:140,sortable:!0,
dataIndex:"init_expired",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"VTEC Expired",width:140,sortable:!0,dataIndex:"expired",format:"M d, Y g:i A T",xtype:"datecolumn"}]),stripeRows:!0,autoScroll:!0,disabled:!0,title:"Geography Included",collapsible:!1,animCollapse:!1});t.on("activate",function(b){this.isLoaded||(p=a(),p.sbw="1",this.getStore().load({params:p}),this.isLoaded=!0)});u=new Ext.grid.GridPanel({id:"products-grid",tbar:[{text:"Print Grid",icon:"icons/print.png",cls:"x-btn-text-icon",
handler:function(){Ext.ux.Printer.print(Ext.getCmp("products-grid"))}}],store:B,saveme:!0,disabled:!1,loadMask:{msg:"Loading Data..."},cm:new Ext.grid.ColumnModel([{header:"Event",width:40,sortable:!0,dataIndex:"eventid"},{header:"Product Issued",width:140,sortable:!0,dataIndex:"product_issued",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"VTEC Issued",width:140,sortable:!0,dataIndex:"issued",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"Initial Expire",width:140,sortable:!0,dataIndex:"init_expired",
format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"VTEC Expired",width:140,sortable:!0,dataIndex:"expired",format:"M d, Y g:i A T",xtype:"datecolumn"},{header:"Area km**2",width:70,sortable:!0,dataIndex:"area"},{header:"Locations",id:"locations",width:250,sortable:!0,dataIndex:"locations"}]),plugins:A,stripeRows:!0,autoScroll:!0,title:"List Events",collapsible:!1,animCollapse:!1,listeners:{rowclick:function(a,b){record=a.getStore().getAt(b);Ext.getCmp("eventid").setValue(record.get("eventid"));
Ext.getCmp("mainbutton").fireEvent("click",{})},activate:function(b){this.isLoaded||(this.getStore().load({params:a()}),this.isLoaded=!0)}}});getNexradTime=function(){if(w)return w;var a;0==m.getCount()?(a=new date,a=a.add(Date.MINUTE,a.format("Z"))):a=m.getAt(0).data.issue;roundDown=parseInt(a.format("i"))%5;return w=a=a.add(Date.MINUTE,0-roundDown)};e=new Ext.Panel({title:"SBW History",id:"sbwhist",isLoaded:!1,disabled:!0});e.on("activate",function(){e.isLoaded||(e.body.update(b()),e.isLoaded=!0)});
k=new Ext.Panel({title:"RADAR Map",id:"radarPabel",isLoaded:!1,disabled:!0});k.on("activate",function(){k.isLoaded||k.body.update(c());k.isLoaded=!0});x=new Ext.Toolbar.TextItem("");new Ext.Viewport({layout:"border",items:[{region:"north",height:70,contentEl:cfg.header},{region:"south",height:10,contentEl:cfg.footer},{region:"west",width:210,collapsible:!0,autoScroll:!0,title:"VTEC Options",items:[F,{contentEl:"boilerplate"}]},new Ext.TabPanel({id:"mainPanel",region:"center",plain:!0,enableTabScroll:!0,
defaults:{bodyStyle:"padding-left:5px"},tbar:new Ext.Toolbar({id:"main-status",defaultText:"",items:[x]}),listeners:{render:function(){}},items:[{contentEl:"help",title:"Help",saveme:!0,preventBodyReset:!0},k,d,new App.RadarPanel({title:"Google Map",id:"googlepanel",listeners:{render:function(){Ext.getCmp("mainbutton").fireEvent("click",{})}},zoomLevel:9}),e,f,g,t,u],activeTab:0})]})});
